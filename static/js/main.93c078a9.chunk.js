(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(66)},37:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"ipfsFetch",function(){return q}),n.d(r,"ipfsSetup",function(){return z}),n.d(r,"ipfsUpdate",function(){return K}),n.d(r,"gistGetAddress",function(){return Q});var a={};n.r(a),n.d(a,"ipfs",function(){return Y});var o=n(0),c=n.n(o),i=n(18),s=n.n(i),u=(n(37),n(13)),p=n(68),d=n(69),l=n(4),f=n.n(l),h=n(7),E=n(10),m=n(11),v=n(14),y=n(12),g=n(15),b=n(23);var O={codeMirror:["External plugin CodeMirror made a HUGE mistake","CodeMirror reflects nothing!"],header:["No header today","Save buttons are missed"],_wrong:["Really sad, but there is an error in the error message. Sorry."]},w={_wrong:["Really sad, but there is an error in the error message. Sorry."]};function S(e,t){var n=e[t]||e._wrong;return n[Math.floor(Math.random()*Math.floor(n.length))]}var j=[O,w,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";return S(O,e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";return S(w,e)},function(e){b.tryCatch(function(e){return Boolean(e.ok)},function(e){throw Error(e.statusText)})(e)}],_=function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(v.a)(this,Object(y.a)(t).call(this,e))).state={error:null,details:null},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,details:t})}},{key:"render",value:function(){var e=this.props&&this.props.reason;return this.state.error?c.a.createElement("div",{id:"errorBlock"},c.a.createElement("h2",null,"Oh-no! Something went wrong"),e&&c.a.createElement("h3",null,j(e)," "),c.a.createElement("section",null,c.a.createElement("h4",null,this.state.error&&this.state.error.toString()," stack"),c.a.createElement("pre",null,c.a.createElement("code",null,this.state.details.componentStack)))):this.props.children}}]),t}(o.Component),k=n(26),C=n.n(k);n(53),n(22),n(54),n(56);var P={lineNumbers:!0,mode:"javascript"},T=function(e){var t=e.code,n=e.handler;return c.a.createElement(_,{reason:j.codeMirror},c.a.createElement(C.a,{value:t,options:P,onChange:function(e){return n(e)}}))},D=n(21);function F(e){var t=e.address,n=e.code,r=e.updater,a=Object(o.useState)(!1),i=Object(D.a)(a,2),s=i[0],u=i[1],p=Object(o.useState)("Save"),d=Object(D.a)(p,2),l=d[0],E=d[1],m=function(){var e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),E("Saving..."),e.next=4,r(n);case 4:E("Save"),u(!1);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return c.a.createElement(_,{reason:j.header},c.a.createElement("h1",null,"Gist ",c.a.createElement("span",{className:"status"},t)),c.a.createElement("button",{onClick:function(){return m()},disabled:s},l))}var M,x,I,L=function(e){function t(){var e,n;Object(E.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(a)))).state={code:n.props.ipfs&&n.props.ipfs.data&&n.props.ipfs.data.code},n.handleChange=function(e){return n.setState({code:e})},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.gistGetAddress(this.props.location.pathname);case 2:return e.next=4,this.props.ipfsFetch(this.props.ipfs.data.address);case 4:this.setState({code:this.props.ipfs.data.code});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.ipfs.data,t=e.code,n=e.address;return c.a.createElement(_,{reason:j.others},!t&&c.a.createElement("span",{className:"loading"},"Loading gist, please wait ..."),t&&c.a.createElement("div",null,c.a.createElement(F,{address:n,code:this.state.code,updater:this.props.ipfsUpdate}),c.a.createElement(T,{code:t,handler:this.handleChange})))}}]),t}(o.Component),A=n(8),G=n(6),U=n(27),N=n(28),R=n.n(N),B=function(e,t){return new Promise(function(n,r){e>=200&&e<300?t.then(function(e){n(e)}):t.then(function(t){return r(new Error("".concat(e,": ").concat(t)))})})},H=(x={},M={},Object(A.a)(M,"IPFS_FETCH_COMPLETED",function(e,t){var n=t.payload||"/* ES5 highlighting only */",r=e.address||"new";return Object.assign({},e,{code:n},{address:r})}),Object(A.a)(M,"IPFS_SETUP_COMPLETED",function(e,t){return t.payload}),Object(A.a)(M,"IPFS_UPDATE_COMPLETED",function(e,t){return t.payload}),Object(A.a)(M,"IPFS_GETADDRESS_COMPLETED",function(e,t){return t.payload}),I=M,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=I[t.type];return n?n(e,t):e}),J=Object(G.c)({data:H}),W=n(23),X=n(59),V=W.compose(W.nth(1),W.split("/")),$=function(e){return V(e)},q=function(e){return e?{type:"IPFS_FETCH",meta:{async:!0,blocking:!0,path:"/api/v0/cat?arg=".concat(e),method:"GET"}}:{type:"".concat("IPFS_FETCH","_COMPLETED")}},z=function(){return{type:"IPFS_SETUP",meta:{async:!0,blocking:!0,path:"/api/v0/version",method:"GET"}}},K=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(n){var r,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=X.at("https://ipfs.infura.io:5001"),t.next=3,r.add(e);case 3:a=t.sent,n({type:"IPFS_UPDATE_COMPLETED",payload:{address:a,code:e}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Q=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(n){var r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=$(e),n({type:"IPFS_GETADDRESS_COMPLETED",payload:{address:r}});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Y=J,Z={gistGetAddress:r.gistGetAddress,ipfsFetch:r.ipfsFetch,ipfsUpdate:r.ipfsUpdate,ipfsSetup:r.ipfsSetup},ee=Object(u.b)(function(e){return{ipfs:e.ipfs}},Z)(L),te=n(29),ne=function(){return function(e){return function(t){var n=e(t);if(!t.meta||!t.meta.async)return n;var r=t.meta,a=r.path,o=r.method,c=void 0===o?"GET":o,i=r.body;if(!a)throw new Error("'path' not specified for async action ".concat(t.type));return function(e,t,n,r){var a={method:t,headers:Object(U.a)({Accept:"application/json"},r),body:"GET"!==t?JSON.stringify(n):null};return R()(e,a).then(function(e){return B(e.status,e.text())})}("https://ipfs.infura.io:5001".concat(a),c,i).then(function(n){return function(e,t,n){return n({type:"".concat(t.type,"_COMPLETED"),payload:e,meta:t.meta}),e}(n,t,e)},function(n){return function(e,t,n){return n({type:"".concat(t.type,"_FAILED"),payload:e,meta:t.meta}),Promise.reject(e)}(n,t,e)})}}};var re=["background: blue","color: white"].join(";"),ae=["background: green","color: white"].join(";"),oe=["background: darkorange","color: white"].join(";"),ce=["background: red","color: white"].join(";"),ie=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return function(n){return function(r){if(!e)return n(r);var a=t.getState(),o=n(r),c=t.getState();return function(){("function"===typeof console.groupCollapsed?console.groupCollapsed:console.info).apply(void 0,arguments)}("%c ".concat(r.type," "),function(e){return e.meta&&e.meta.async?e.type.indexOf("_COMPLETED")>-1?ae:e.type.indexOf("_FAILED")>-1?ce:oe:re}(r)),se("%cprev state","color: darkorange",a),se("%caction payload","color: blue",r.payload),se("%cnext state","color: darkgreen",c),function(){("function"===typeof console.groupEnd?console.groupEnd:console.info).apply(void 0,arguments)}(),o}}}};function se(){var e;(e=console).info.apply(e,arguments)}var ue=n(30),pe=n.n(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=function(e){var t=Object(G.c)(a),n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d;return Object(G.e)(t,e,n(Object(G.a)(ne,te.a,ie(!0),pe()())))}();s.a.render(c.a.createElement(_,{reason:j.others},c.a.createElement(u.a,{store:de},c.a.createElement(p.a,{basename:"/agist/"},c.a.createElement(d.a,{path:"/*",component:ee})))),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[32,2,1]]]);
//# sourceMappingURL=main.93c078a9.chunk.js.map