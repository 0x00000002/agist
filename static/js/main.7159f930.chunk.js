(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(t,e,n){t.exports=n(65)},36:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"ipfsFetch",function(){return $}),n.d(r,"ipfsSetup",function(){return q}),n.d(r,"ipfsUpdate",function(){return z}),n.d(r,"gistGetAddress",function(){return K});var a={};n.r(a),n.d(a,"ipfs",function(){return Q});var o=n(0),c=n.n(o),i=n(18),s=n.n(i),u=(n(36),n(15)),p=n(67),d=n(68),l=n(4),f=n.n(l),h=n(7),v=n(9),E=n(10),m=n(12),y=n(11),b=n(13),g=n(22);var O={codeMirror:["External plugin CodeMirror made a HUGE mistake","CodeMirror reflects nothing!"],header:["No header today","Save buttons are missed"],_wrong:["Really sad, but there is an error in the error message. Sorry."]},w={_wrong:["Really sad, but there is an error in the error message. Sorry."]};function S(t,e){var n=t[e]||t._wrong;return n[Math.floor(Math.random()*Math.floor(n.length))]}var j=[O,w,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";return S(O,t)},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"others";return S(w,t)},function(t){g.tryCatch(function(t){return Boolean(t.ok)},function(t){throw Error(t.statusText)})(t)}],_=function(t){function e(t){var n;return Object(v.a)(this,e),(n=Object(m.a)(this,Object(y.a)(e).call(this,t))).state={error:null,details:null},n}return Object(b.a)(e,t),Object(E.a)(e,[{key:"componentDidCatch",value:function(t,e){this.setState({error:t,details:e})}},{key:"render",value:function(){var t=this.props&&this.props.reason;return this.state.error?c.a.createElement("div",{id:"errorBlock"},c.a.createElement("h2",null,"Oh-no! Something went wrong"),t&&c.a.createElement("h3",null,j(t)," "),c.a.createElement("section",null,c.a.createElement("h4",null,this.state.error&&this.state.error.toString()," stack"),c.a.createElement("pre",null,c.a.createElement("code",null,this.state.details.componentStack)))):this.props.children}}]),e}(o.Component),k=n(25),C=n.n(k);n(52),n(21),n(53),n(55);var D,P,T,F={lineNumbers:!0,mode:"javascript"},M=function(t){var e=t.code,n=t.handler;return c.a.createElement(_,{reason:j.codeMirror},c.a.createElement(C.a,{value:e,options:F,onChange:function(t){return n(t)}}))},x=function(t){function e(){var t,n;Object(v.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(a)))).state={button:"Save",isDisabled:!1},n}return Object(b.a)(e,t),Object(E.a)(e,[{key:"saveCode",value:function(){var t=Object(h.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({button:" saving",isDisabled:!0}),t.next=3,this.props.updater(this.props.code);case 3:this.setState({button:"Save",isDisabled:!1});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return c.a.createElement(_,{reason:j.header},c.a.createElement("h1",null,"Gist ",c.a.createElement("span",{className:"status"},this.props.address)),c.a.createElement("button",{onClick:function(e){return t.saveCode()},disabled:this.state.isDisabled},this.state.button))}}]),e}(o.Component),A=function(t){function e(){var t,n;Object(v.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(m.a)(this,(t=Object(y.a)(e)).call.apply(t,[this].concat(a)))).state={code:n.props.ipfs&&n.props.ipfs.data&&n.props.ipfs.data.code},n.handleChange=function(t){return n.setState({code:t})},n}return Object(b.a)(e,t),Object(E.a)(e,[{key:"componentDidMount",value:function(){var t=Object(h.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.props.gistGetAddress(this.props.location.pathname);case 2:return t.next=4,this.props.ipfsFetch(this.props.ipfs.data.address);case 4:this.setState({code:this.props.ipfs.data.code});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.ipfs.data,e=t.code,n=t.address;return c.a.createElement(_,{reason:j.others},!e&&c.a.createElement("span",{className:"loading"},"Loading gist, please wait ..."),e&&c.a.createElement("div",null,c.a.createElement(x,{address:n,code:this.state.code,updater:this.props.ipfsUpdate}),c.a.createElement(M,{code:e,handler:this.handleChange})))}}]),e}(o.Component),I=n(8),L=n(6),G=n(26),U=n(27),N=n.n(U),R=function(t,e){return new Promise(function(n,r){t>=200&&t<300?e.then(function(t){n(t)}):e.then(function(e){return r(new Error("".concat(t,": ").concat(e)))})})},B=(P={},D={},Object(I.a)(D,"IPFS_FETCH_COMPLETED",function(t,e){var n=e.payload||"/* ES5 highlighting only */",r=t.address||"new";return Object.assign({},t,{code:n},{address:r})}),Object(I.a)(D,"IPFS_SETUP_COMPLETED",function(t,e){return e.payload}),Object(I.a)(D,"IPFS_UPDATE_COMPLETED",function(t,e){return e.payload}),Object(I.a)(D,"IPFS_GETADDRESS_COMPLETED",function(t,e){return e.payload}),T=D,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0,n=T[e.type];return n?n(t,e):t}),H=Object(L.c)({data:B}),J=n(22),W=n(58),X=J.compose(J.nth(1),J.split("/")),V=function(t){return X(t)},$=function(t){return t?{type:"IPFS_FETCH",meta:{async:!0,blocking:!0,path:"/api/v0/cat?arg=".concat(t),method:"GET"}}:{type:"".concat("IPFS_FETCH","_COMPLETED")}},q=function(){return{type:"IPFS_SETUP",meta:{async:!0,blocking:!0,path:"/api/v0/version",method:"GET"}}},z=function(t){return function(){var e=Object(h.a)(f.a.mark(function e(n){var r,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=W.at("https://ipfs.infura.io:5001"),e.next=3,r.add(t);case 3:a=e.sent,n({type:"IPFS_UPDATE_COMPLETED",payload:{address:a,code:t}});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},K=function(t){return function(){var e=Object(h.a)(f.a.mark(function e(n){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=V(t),n({type:"IPFS_GETADDRESS_COMPLETED",payload:{address:r}});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},Q=H,Y={gistGetAddress:r.gistGetAddress,ipfsFetch:r.ipfsFetch,ipfsUpdate:r.ipfsUpdate,ipfsSetup:r.ipfsSetup},Z=Object(u.b)(function(t){return{ipfs:t.ipfs}},Y)(A),tt=n(28),et=function(){return function(t){return function(e){var n=t(e);if(!e.meta||!e.meta.async)return n;var r=e.meta,a=r.path,o=r.method,c=void 0===o?"GET":o,i=r.body;if(!a)throw new Error("'path' not specified for async action ".concat(e.type));return function(t,e,n,r){var a={method:e,headers:Object(G.a)({Accept:"application/json"},r),body:"GET"!==e?JSON.stringify(n):null};return N()(t,a).then(function(t){return R(t.status,t.text())})}("https://ipfs.infura.io:5001".concat(a),c,i).then(function(n){return function(t,e,n){return n({type:"".concat(e.type,"_COMPLETED"),payload:t,meta:e.meta}),t}(n,e,t)},function(n){return function(t,e,n){return n({type:"".concat(e.type,"_FAILED"),payload:t,meta:e.meta}),Promise.reject(t)}(n,e,t)})}}};var nt=["background: blue","color: white"].join(";"),rt=["background: green","color: white"].join(";"),at=["background: darkorange","color: white"].join(";"),ot=["background: red","color: white"].join(";"),ct=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e){return function(n){return function(r){if(!t)return n(r);var a=e.getState(),o=n(r),c=e.getState();return function(){("function"===typeof console.groupCollapsed?console.groupCollapsed:console.info).apply(void 0,arguments)}("%c ".concat(r.type," "),function(t){return t.meta&&t.meta.async?t.type.indexOf("_COMPLETED")>-1?rt:t.type.indexOf("_FAILED")>-1?ot:at:nt}(r)),it("%cprev state","color: darkorange",a),it("%caction payload","color: blue",r.payload),it("%cnext state","color: darkgreen",c),function(){("function"===typeof console.groupEnd?console.groupEnd:console.info).apply(void 0,arguments)}(),o}}}};function it(){var t;(t=console).info.apply(t,arguments)}var st=n(29),ut=n.n(st);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pt=function(t){var e=Object(L.c)(a),n=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d;return Object(L.e)(e,t,n(Object(L.a)(et,tt.a,ct(!0),ut()())))}();s.a.render(c.a.createElement(_,{reason:j.others},c.a.createElement(u.a,{store:pt},c.a.createElement(p.a,{basename:"/agist/"},c.a.createElement(d.a,{path:"/*",component:Z})))),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.7159f930.chunk.js.map